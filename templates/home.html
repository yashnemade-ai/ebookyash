<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>E-Book Library – Home</title>

  <!-- Google font -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

  <!-- Font-Awesome icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

  <!-- Your project-wide stylesheet (keeps cards, footer, etc.) -->
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">

  <!-- Page-specific additions / overrides -->
  <style>
    /* ───── HERO tweaks ───── */
    .hero{background:linear-gradient(145deg,#ffffff 0%,#eef1fb 40%,#ffffff 100%);}
    /* replace the coloured blobs with a white sheen */
    .hero .blob{display:none;}                 /* hide old pink one     */
    .hero .blob.alt{display:none;}             /* hide old purple one   */
    .sheen{
      position:absolute; inset:0;
      background:linear-gradient(120deg,rgba(255,255,255,.0) 0%,rgba(255,255,255,.8) 50%,rgba(255,255,255,0) 100%);
      transform:translateX(-100%);             /* start off-screen */
      animation:sheenMove 18s linear infinite;
      pointer-events:none;
    }
    @keyframes sheenMove{to{transform:translateX(100%);} }

    /* ───── Dropdown arrow animation ───── */
    .search-bar select{
      transition:background .25s;
      background-position:right 18px center;
      background-size:14px;
    }
    .search-bar select.open{background-position:right 18px center;transform-origin:right center;animation:flip .3s;}
    @keyframes flip{from{transform:rotateX(0deg);}to{transform:rotateX(180deg);} }

    /* change search button color to red */
    .search-bar button{background:#e84545;}
    .search-bar button:hover{background:#c93838;}
  </style>
</head>

<body>

  <!-- ───── NAVBAR (unchanged) ───── -->
  <header>
    <div class="brand"><i class="fas fa-book-reader"></i> E-Book Library</div>
    <nav>
      <ul>
        <li><a class="nav-btn" href="#"><i class="fas fa-home"></i> Home</a></li>
        <li><a class="nav-btn" href="#"><i class="fas fa-sign-out-alt"></i> Logout</a></li>
      </ul>
    </nav>
  </header>

  <!-- ───── HERO ───── -->
  <section class="hero">
    <span class="sheen"></span>  <!-- subtle moving white highlight -->

    <h1>Discover Your Next Great Read</h1>
    <p>Explore thousands of ebooks across every genre, from bestsellers to hidden gems</p>

    <form class="search-bar" onsubmit="return false;">
      <input id="searchInput" type="text" placeholder="Search for books by title…" />

      <!-- UPDATED category list -->
      <select id="categorySelect">
        <option value="*">All Categories</option>
        <option value="sci-fi">Sci-Fi</option>
        <option value="non-fiction">Non-Fiction</option>
        <option value="action">Action</option>
        <option value="comedy">Comedy</option>
        <option value="adventure">Adventure</option>
        <option value="romance">Romance</option>
        <option value="fantasy">Fantasy</option>
      </select>

      <button id="searchBtn"><i class="fas fa-search"></i> Search</button>
    </form>
  </section>

  <!-- ───── FEATURED BOOKS ───── -->
  <div class="section-title">
    <h2>Featured Books</h2>
    <p>Explore our hand-picked selection of must-read books</p>
  </div>

  <div id="bookGrid" class="book-grid">
    {% for book in books %}
      <div class="book-card"
           data-title="{{ book.title|lower }}"
           data-category="{{ (book.category if book.category else 'uncat')|lower }}">
        <img src="{{ url_for('static', filename=book.image_url) }}" alt="{{ book.title }}">
        <div class="book-body">
          <h3>{{ book.title }}</h3>
          <p>{{ book.description[:100] }}…</p>
          <a href="{{ url_for('static', filename=book.pdf_file) }}" target="_blank">Read PDF</a>
        </div>
      </div>
    {% endfor %}
  </div>


  <!-- Live filter + arrow flip -->
  <script>
    const q   = document.getElementById('searchInput');
    const cat = document.getElementById('categorySelect');
    const btn = document.getElementById('searchBtn');
    const cards=[...document.querySelectorAll('.book-card')];

    function filter(){
      const t=q.value.toLowerCase().trim();
      const c=cat.value;
      cards.forEach(card=>{
        const okText = card.dataset.title.includes(t);
        const okCat  = c==='*'||card.dataset.category===c;
        card.classList.toggle('hide',!(okText&&okCat));
      });
    }
    q.addEventListener('input',filter);
    cat.addEventListener('change',()=>{cat.classList.add('open');filter();});
    cat.addEventListener('blur', ()=>cat.classList.remove('open'));
    btn.addEventListener('click',filter);
  </script>
</body>
</html>
