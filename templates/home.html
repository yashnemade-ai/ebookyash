<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Book Home</title>

  <!-- Main site CSS (your existing stylesheet) -->
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">

  <!-- Extra page-specific styles -->
  <style>
    /* ----------  HERO BACKGROUND BLOBS  ---------- */
    .home-hero {
      position: relative;
      background: linear-gradient(135deg,#f8faff 0%,#eef2ff 100%);
      overflow:hidden;
    }
    .home-hero::before,
    .home-hero::after{
      content:"";
      position:absolute;
      width:550px;height:550px;
      border-radius:50%;
      filter:blur(140px);
      opacity:.55;
      animation: drift 15s linear infinite alternate;
    }
    .home-hero::before{ background:#ff5b8a; left:-300px; top:0;}
    .home-hero::after { background:#6a5bff; right:-300px; top:60px;}

    @keyframes drift{
      0%  { transform:translateX(-30px); }
      100%{ transform:translateX(30px);  }
    }

    /* ----------  SEARCH BAR  ---------- */
    .search-bar{
      display:flex; gap:12px; margin:40px auto 0; padding:12px 18px;
      background:#fff; border-radius:999px; box-shadow:0 10px 25px rgba(0,0,0,.06);
      max-width:780px; width:90%; align-items:center; flex-wrap:wrap;
    }
    .search-bar input{
      flex:1 1 240px; border:none; outline:none; font-size:15px;
    }
    .search-bar select{
      flex:0 0 160px; border:none; outline:none; background:#f1f3f9;
      padding:10px 14px; border-radius:8px; font-size:15px;
    }
    .search-btn{
      flex:0 0 120px; background:#4834d4; color:#fff;
      font-weight:600; border:none; padding:12px 0; border-radius:60px;
      cursor:pointer; transition:transform .2s, box-shadow .2s;
    }
    .search-btn:active{
      transform:scale(.93);
      box-shadow:0 0 0 8px rgba(72,52,212,.25);
    }

    @media(max-width:540px){
      .search-bar{ flex-direction:column; gap:10px; border-radius:18px;}
      .search-bar select{ width:100%;}
      .search-btn{ width:100%;}
    }

    /* ----------  BOOK CARDS  ---------- */
    .book-card{ transition:transform .25s;}
    .book-card.hide{ display:none;}
    .book-card:hover{ transform:translateY(-6px);}
  </style>
</head>

<body>
  <!-- HERO  -->
  <section class="home-hero">
    <h1>Discover Your Next Great Read</h1>
    <p>Explore thousands of ebooks across every genre, from bestsellers to hidden gems</p>

    <!-- SEARCH BAR  -->
    <form class="search-bar" id="filterForm" onsubmit="return false;">
      <input id="searchInput" type="text" placeholder="Search for books by title…">

      <!-- Category dropdown auto-filled from Jinja list -->
      <select id="categorySelect">
        <option value="*">All Categories</option>
        {% for cat in categories %}
          <option value="{{ cat|lower }}">{{ cat }}</option>
        {% endfor %}
      </select>

      <button class="search-btn" id="searchBtn">
        <i class="fas fa-search"></i> Search
      </button>
    </form>
  </section>

  <!-- FEATURED SECTION -->
  <h2 class="section-title">Featured Books</h2>
  <p style="text-align:center;margin-top:-12px;color:#666">
    Explore our hand-picked selection of must-read books
  </p>

  <!-- BOOK GRID -->
  <div class="book-list" id="bookGrid">
    {% for book in books %}
      <div class="book-card"
           data-title="{{ book.title|lower }}"
           data-category="{{ book.category|lower }}">
        <img src="{{ url_for('static', filename=book.image_url) }}"
             alt="{{ book.title }}">
        <h2>{{ book.title }}</h2>
        <p>{{ book.description[:100] }}…</p>
        <a href="{{ url_for('static', filename=book.pdf_file) }}" target="_blank">Read PDF</a>
      </div>
    {% endfor %}
  </div>

  <!-- Font Awesome for icon -->
  <script src="https://kit.fontawesome.com/a6a82c2d07.js" crossorigin="anonymous"></script>

  <!-- ----------  FILTER JS  ---------- -->
  <script>
    const searchInput  = document.getElementById('searchInput');
    const catSelect    = document.getElementById('categorySelect');
    const bookCards    = [...document.querySelectorAll('.book-card')];

    function runFilter(){
      const q   = searchInput.value.trim().toLowerCase();
      const cat = catSelect.value;

      bookCards.forEach(card=>{
        const matchTitle = card.dataset.title.includes(q);
        const matchCat   = (cat==='*' || card.dataset.category===cat);
        card.classList.toggle('hide', !(matchTitle && matchCat));
      });
    }

    // live typing + dropdown change + button click
    searchInput.addEventListener('keyup', runFilter);
    catSelect  .addEventListener('change', runFilter);
    document.getElementById('searchBtn').addEventListener('click',runFilter);
  </script>
</body>
</html>
